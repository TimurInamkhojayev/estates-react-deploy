{"ast":null,"code":"import React,{useState}from'react';import{NavLink,Navigate}from'react-router-dom';import{Button,Form,Grid,Icon,Segment,Menu,Message,Divider}from'semantic-ui-react';import{useAuth}from'../context/AuthContext';import{estateApi}from'../misc/EstateApi';import{parseJwt,getSocialLoginUrl,handleLogError}from'../misc/Helpers';import Footer from\"../Footer\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){const Auth=useAuth();const isLoggedIn=Auth.userIsAuthenticated();const[username,setUsername]=useState('');const[password,setPassword]=useState('');const[isError,setIsError]=useState(false);const handleInputChange=(e,_ref)=>{let{name,value}=_ref;if(name==='username'){setUsername(value);}else if(name==='password'){setPassword(value);}};const handleSubmit=async e=>{e.preventDefault();if(!(username&&password)){setIsError(true);return;}try{const response=await estateApi.authenticate(username,password);const{accessToken}=response.data;const data=parseJwt(accessToken);const authenticatedUser={data,accessToken};Auth.userLogin(authenticatedUser);setUsername('');setPassword('');setIsError(false);}catch(error){handleLogError(error);setIsError(true);}};if(isLoggedIn){return/*#__PURE__*/_jsx(Navigate,{to:\"/\"});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Grid,{textAlign:\"center\",children:/*#__PURE__*/_jsxs(Grid.Column,{style:{maxWidth:450},children:[/*#__PURE__*/_jsx(Form,{size:\"large\",onSubmit:handleSubmit,children:/*#__PURE__*/_jsxs(Segment,{children:[/*#__PURE__*/_jsx(Form.Input,{fluid:true,autoFocus:true,name:\"username\",icon:\"user\",iconPosition:\"left\",placeholder:\"Username\",onChange:handleInputChange}),/*#__PURE__*/_jsx(Form.Input,{fluid:true,name:\"password\",icon:\"lock\",iconPosition:\"left\",placeholder:\"Password\",type:\"password\",onChange:handleInputChange}),/*#__PURE__*/_jsx(Button,{color:\"grey\",fluid:true,size:\"large\",children:\"Login\"})]})}),/*#__PURE__*/_jsxs(Message,{children:[\"Don't have already an account? \",/*#__PURE__*/_jsx(NavLink,{to:\"/signup\",color:\"grey\",children:\"Sign Up\"})]}),isError&&/*#__PURE__*/_jsx(Message,{negative:true,children:\"The username or password provided are incorrect!\"})]})}),/*#__PURE__*/_jsx(Footer,{})]});}export default Login;","map":{"version":3,"names":["React","useState","NavLink","Navigate","Button","Form","Grid","Icon","Segment","Menu","Message","Divider","useAuth","estateApi","parseJwt","getSocialLoginUrl","handleLogError","Footer","jsx","_jsx","jsxs","_jsxs","Login","Auth","isLoggedIn","userIsAuthenticated","username","setUsername","password","setPassword","isError","setIsError","handleInputChange","e","_ref","name","value","handleSubmit","preventDefault","response","authenticate","accessToken","data","authenticatedUser","userLogin","error","to","children","textAlign","Column","style","maxWidth","size","onSubmit","Input","fluid","autoFocus","icon","iconPosition","placeholder","onChange","type","color","negative"],"sources":["/Users/timurinamkhojayev/Desktop/inamkhojayev-java-spring-project-main/estate-client-react/src/components/home/Login.js"],"sourcesContent":["import React, {useState} from 'react'\nimport {NavLink, Navigate} from 'react-router-dom'\nimport {Button, Form, Grid, Icon, Segment, Menu, Message, Divider} from 'semantic-ui-react'\nimport {useAuth} from '../context/AuthContext'\nimport {estateApi} from '../misc/EstateApi'\nimport {parseJwt, getSocialLoginUrl, handleLogError} from '../misc/Helpers'\nimport Footer from \"../Footer\";\n\nfunction Login() {\n    const Auth = useAuth()\n    const isLoggedIn = Auth.userIsAuthenticated()\n\n    const [username, setUsername] = useState('')\n    const [password, setPassword] = useState('')\n    const [isError, setIsError] = useState(false)\n\n    const handleInputChange = (e, {name, value}) => {\n        if (name === 'username') {\n            setUsername(value)\n        } else if (name === 'password') {\n            setPassword(value)\n        }\n    }\n\n    const handleSubmit = async (e) => {\n        e.preventDefault()\n\n        if (!(username && password)) {\n            setIsError(true)\n            return\n        }\n\n        try {\n            const response = await estateApi.authenticate(username, password)\n            const {accessToken} = response.data\n            const data = parseJwt(accessToken)\n            const authenticatedUser = {data, accessToken}\n\n            Auth.userLogin(authenticatedUser)\n\n            setUsername('')\n            setPassword('')\n            setIsError(false)\n        } catch (error) {\n            handleLogError(error)\n            setIsError(true)\n        }\n    }\n\n    if (isLoggedIn) {\n        return <Navigate to='/'/>\n    }\n\n    return (\n        <div>\n            <Grid textAlign='center'>\n                <Grid.Column style={{maxWidth: 450}}>\n                    <Form size='large' onSubmit={handleSubmit}>\n                        <Segment>\n                            <Form.Input\n                                fluid\n                                autoFocus\n                                name='username'\n                                icon='user'\n                                iconPosition='left'\n                                placeholder='Username'\n                                onChange={handleInputChange}\n                            />\n                            <Form.Input\n                                fluid\n                                name='password'\n                                icon='lock'\n                                iconPosition='left'\n                                placeholder='Password'\n                                type='password'\n                                onChange={handleInputChange}\n                            />\n                            <Button color='grey' fluid size='large'>Login</Button>\n                        </Segment>\n                    </Form>\n                    <Message>{`Don't have already an account? `}\n                        <NavLink to=\"/signup\" color='grey'>Sign Up</NavLink>\n                    </Message>\n                    {isError && <Message negative>The username or password provided are incorrect!</Message>}\n                </Grid.Column>\n            </Grid>\n            <Footer/>\n        </div>\n    )\n}\n\nexport default Login\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAGC,QAAQ,KAAO,OAAO,CACrC,OAAQC,OAAO,CAAEC,QAAQ,KAAO,kBAAkB,CAClD,OAAQC,MAAM,CAAEC,IAAI,CAAEC,IAAI,CAAEC,IAAI,CAAEC,OAAO,CAAEC,IAAI,CAAEC,OAAO,CAAEC,OAAO,KAAO,mBAAmB,CAC3F,OAAQC,OAAO,KAAO,wBAAwB,CAC9C,OAAQC,SAAS,KAAO,mBAAmB,CAC3C,OAAQC,QAAQ,CAAEC,iBAAiB,CAAEC,cAAc,KAAO,iBAAiB,CAC3E,MAAO,CAAAC,MAAM,KAAM,WAAW,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE/B,QAAS,CAAAC,KAAKA,CAAA,CAAG,CACb,KAAM,CAAAC,IAAI,CAAGX,OAAO,CAAC,CAAC,CACtB,KAAM,CAAAY,UAAU,CAAGD,IAAI,CAACE,mBAAmB,CAAC,CAAC,CAE7C,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAG1B,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAAC2B,QAAQ,CAAEC,WAAW,CAAC,CAAG5B,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAAC6B,OAAO,CAAEC,UAAU,CAAC,CAAG9B,QAAQ,CAAC,KAAK,CAAC,CAE7C,KAAM,CAAA+B,iBAAiB,CAAGA,CAACC,CAAC,CAAAC,IAAA,GAAoB,IAAlB,CAACC,IAAI,CAAEC,KAAK,CAAC,CAAAF,IAAA,CACvC,GAAIC,IAAI,GAAK,UAAU,CAAE,CACrBR,WAAW,CAACS,KAAK,CAAC,CACtB,CAAC,IAAM,IAAID,IAAI,GAAK,UAAU,CAAE,CAC5BN,WAAW,CAACO,KAAK,CAAC,CACtB,CACJ,CAAC,CAED,KAAM,CAAAC,YAAY,CAAG,KAAO,CAAAJ,CAAC,EAAK,CAC9BA,CAAC,CAACK,cAAc,CAAC,CAAC,CAElB,GAAI,EAAEZ,QAAQ,EAAIE,QAAQ,CAAC,CAAE,CACzBG,UAAU,CAAC,IAAI,CAAC,CAChB,OACJ,CAEA,GAAI,CACA,KAAM,CAAAQ,QAAQ,CAAG,KAAM,CAAA1B,SAAS,CAAC2B,YAAY,CAACd,QAAQ,CAAEE,QAAQ,CAAC,CACjE,KAAM,CAACa,WAAW,CAAC,CAAGF,QAAQ,CAACG,IAAI,CACnC,KAAM,CAAAA,IAAI,CAAG5B,QAAQ,CAAC2B,WAAW,CAAC,CAClC,KAAM,CAAAE,iBAAiB,CAAG,CAACD,IAAI,CAAED,WAAW,CAAC,CAE7ClB,IAAI,CAACqB,SAAS,CAACD,iBAAiB,CAAC,CAEjChB,WAAW,CAAC,EAAE,CAAC,CACfE,WAAW,CAAC,EAAE,CAAC,CACfE,UAAU,CAAC,KAAK,CAAC,CACrB,CAAE,MAAOc,KAAK,CAAE,CACZ7B,cAAc,CAAC6B,KAAK,CAAC,CACrBd,UAAU,CAAC,IAAI,CAAC,CACpB,CACJ,CAAC,CAED,GAAIP,UAAU,CAAE,CACZ,mBAAOL,IAAA,CAAChB,QAAQ,EAAC2C,EAAE,CAAC,GAAG,CAAC,CAAC,CAC7B,CAEA,mBACIzB,KAAA,QAAA0B,QAAA,eACI5B,IAAA,CAACb,IAAI,EAAC0C,SAAS,CAAC,QAAQ,CAAAD,QAAA,cACpB1B,KAAA,CAACf,IAAI,CAAC2C,MAAM,EAACC,KAAK,CAAE,CAACC,QAAQ,CAAE,GAAG,CAAE,CAAAJ,QAAA,eAChC5B,IAAA,CAACd,IAAI,EAAC+C,IAAI,CAAC,OAAO,CAACC,QAAQ,CAAEhB,YAAa,CAAAU,QAAA,cACtC1B,KAAA,CAACb,OAAO,EAAAuC,QAAA,eACJ5B,IAAA,CAACd,IAAI,CAACiD,KAAK,EACPC,KAAK,MACLC,SAAS,MACTrB,IAAI,CAAC,UAAU,CACfsB,IAAI,CAAC,MAAM,CACXC,YAAY,CAAC,MAAM,CACnBC,WAAW,CAAC,UAAU,CACtBC,QAAQ,CAAE5B,iBAAkB,CAC/B,CAAC,cACFb,IAAA,CAACd,IAAI,CAACiD,KAAK,EACPC,KAAK,MACLpB,IAAI,CAAC,UAAU,CACfsB,IAAI,CAAC,MAAM,CACXC,YAAY,CAAC,MAAM,CACnBC,WAAW,CAAC,UAAU,CACtBE,IAAI,CAAC,UAAU,CACfD,QAAQ,CAAE5B,iBAAkB,CAC/B,CAAC,cACFb,IAAA,CAACf,MAAM,EAAC0D,KAAK,CAAC,MAAM,CAACP,KAAK,MAACH,IAAI,CAAC,OAAO,CAAAL,QAAA,CAAC,OAAK,CAAQ,CAAC,EACjD,CAAC,CACR,CAAC,cACP1B,KAAA,CAACX,OAAO,EAAAqC,QAAA,iDACJ5B,IAAA,CAACjB,OAAO,EAAC4C,EAAE,CAAC,SAAS,CAACgB,KAAK,CAAC,MAAM,CAAAf,QAAA,CAAC,SAAO,CAAS,CAAC,EAC/C,CAAC,CACTjB,OAAO,eAAIX,IAAA,CAACT,OAAO,EAACqD,QAAQ,MAAAhB,QAAA,CAAC,kDAAgD,CAAS,CAAC,EAC/E,CAAC,CACZ,CAAC,cACP5B,IAAA,CAACF,MAAM,GAAC,CAAC,EACR,CAAC,CAEd,CAEA,cAAe,CAAAK,KAAK","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}